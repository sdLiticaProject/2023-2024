{"ast":null,"code":"import Cookies from 'js-cookie';\nimport axios from 'axios';\nimport * as api from '../constants/api';\nexport const LOGIN_LOADING = 'login_loading';\nexport const LOGIN_SUCCESS = 'login_success';\nexport const LOGIN_FAIL = 'login_fail';\nexport const LOGOUT_LOADING = 'LOGOUT_LOADING';\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nexport const LOGOUT_FAIL = 'LOGOUT_FAIL';\nexport const REGISTER_LOADING = 'REGISTER_LOADING';\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_FAIL = 'REGISTER_FAIL';\nexport const loginUser = (email, password) => async dispatch => {\n  dispatch({\n    type: LOGIN_LOADING\n  });\n  try {\n    const res = await axios.post(api.loginUser(), {\n      email,\n      password\n    });\n    Cookies.set('token', res.data.entity.token, {\n      expires: 5\n    });\n    return dispatch({\n      type: LOGIN_SUCCESS\n    });\n  } catch (error) {\n    return dispatch({\n      type: LOGIN_FAIL,\n      message: 'login failed'\n    });\n  }\n};\nexport const logoutUser = () => async dispatch => {\n  dispatch({\n    type: LOGOUT_LOADING\n  });\n  try {\n    const res = await axios.post(api.logoutUser(), {}, {\n      headers: {\n        Authorization: `cloudToken ${Cookies.get('token')}`\n      }\n    });\n    if (res.status !== 204) {\n      throw Error(res.data.message);\n    }\n    return dispatch({\n      type: LOGOUT_SUCCESS\n    });\n  } catch (error) {\n    return dispatch({\n      type: LOGOUT_FAIL,\n      error\n    });\n  }\n};\nexport const registerUser = (email, password, firstName, lastName) => async dispatch => {\n  dispatch({\n    type: REGISTER_LOADING\n  });\n  try {\n    const res = await axios.post(api.registerUser(), {\n      email,\n      password,\n      firstName,\n      lastName\n    });\n    if (res.status !== 201) {\n      throw Error(res.data.message);\n    }\n    dispatch({\n      type: REGISTER_SUCCESS\n    });\n  } catch (error) {\n    dispatch({\n      type: REGISTER_FAIL,\n      error\n    });\n  }\n};","map":{"version":3,"names":["Cookies","axios","api","LOGIN_LOADING","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_LOADING","LOGOUT_SUCCESS","LOGOUT_FAIL","REGISTER_LOADING","REGISTER_SUCCESS","REGISTER_FAIL","loginUser","email","password","dispatch","type","res","post","set","data","entity","token","expires","error","message","logoutUser","headers","Authorization","get","status","Error","registerUser","firstName","lastName"],"sources":["/Users/dmitrydrobysh/Desktop/sdlitica/code-ui/src/actions/loginActions.js"],"sourcesContent":["import Cookies from 'js-cookie';\nimport axios from 'axios';\nimport * as api from '../constants/api';\n\nexport const LOGIN_LOADING = 'login_loading';\nexport const LOGIN_SUCCESS = 'login_success';\nexport const LOGIN_FAIL = 'login_fail';\n\nexport const LOGOUT_LOADING = 'LOGOUT_LOADING';\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nexport const LOGOUT_FAIL = 'LOGOUT_FAIL';\n\nexport const REGISTER_LOADING = 'REGISTER_LOADING';\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_FAIL = 'REGISTER_FAIL';\n\nexport const loginUser = (email, password) => async (dispatch) => {\n  dispatch({\n    type: LOGIN_LOADING,\n  });\n\n  try {\n    const res = await axios.post(api.loginUser(), {\n      email,\n      password,\n    });\n\n    Cookies.set('token', res.data.entity.token, { expires: 5 });\n    return dispatch({\n      type: LOGIN_SUCCESS,\n    });\n  } catch (error) {\n    return dispatch({\n      type: LOGIN_FAIL,\n      message: 'login failed',\n    });\n  }\n};\n\nexport const logoutUser = () => async (dispatch) => {\n  dispatch({\n    type: LOGOUT_LOADING,\n  });\n  try {\n    const res = await axios.post(\n      api.logoutUser(),\n      {},\n      {\n        headers: { Authorization: `cloudToken ${Cookies.get('token')}` },\n      },\n    );\n    if (res.status !== 204) {\n      throw Error(res.data.message);\n    }\n    return dispatch({\n      type: LOGOUT_SUCCESS,\n    });\n  } catch (error) {\n    return dispatch({\n      type: LOGOUT_FAIL,\n      error,\n    });\n  }\n};\n\nexport const registerUser = (email, password, firstName, lastName) => async (dispatch) => {\n  dispatch({\n    type: REGISTER_LOADING,\n  });\n\n  try {\n    const res = await axios.post(api.registerUser(), {\n      email,\n      password,\n      firstName,\n      lastName,\n    });\n    if (res.status !== 201) {\n      throw Error(res.data.message);\n    }\n    dispatch({\n      type: REGISTER_SUCCESS,\n    });\n  } catch (error) {\n    dispatch({\n      type: REGISTER_FAIL,\n      error,\n    });\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}