{"ast":null,"code":"import _slicedToArray from\"/Users/dmitrydrobysh/Desktop/SyncDir/code-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useForm}from'react-hook-form';import{NavLink,useHistory}from'react-router-dom';import Snackbar from'@material-ui/core/Snackbar';import IconButton from'@material-ui/core/IconButton';import CloseIcon from'@material-ui/icons/Close';import{useSelector}from'react-redux';import useActions from'../../../../hooks/useAction';import{HOME,LOGIN}from'../../../../constants/routes';import{loginUser,LOGIN_FAIL,LOGIN_LOADING,LOGIN_SUCCESS}from'../../../../actions/loginActions';import{Button,InputFormWrapper,LoadIndicator,NavLinkWrapper,Error,Transfer,FormWrapper}from'./FormsStyles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(){var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register,errors=_useForm.errors;var _useActions=useActions([loginUser]),_useActions2=_slicedToArray(_useActions,1),submitAction=_useActions2[0];var history=useHistory();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isSnackbarOpen=_React$useState2[0],setSnackbarOpen=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),snackMessage=_React$useState4[0],setSnackMessage=_React$useState4[1];var isLoginLoading=useSelector(function(state){return state.login.type;})===LOGIN_LOADING;var handleSnackbarClose=function handleSnackbarClose(event,reason){if(reason==='clickaway'){return;}setSnackbarOpen(false);};var submit=function submit(data){if(data.email!==''&&data.password!==''){submitAction(data.email,data.password).then(function(e){if(e.type&&e.type===LOGIN_FAIL){setSnackMessage(e.message);setSnackbarOpen(true);}else if(e.type&&e.type===LOGIN_SUCCESS){// TODO: add push to dashboard page\nhistory.push(HOME);}});}};return/*#__PURE__*/_jsxs(FormWrapper,{onSubmit:handleSubmit(submit),children:[/*#__PURE__*/_jsxs(InputFormWrapper,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{ref:register({required:'required',pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i,message:'invalid email address'}}),id:\"email\",name:\"email\"}),/*#__PURE__*/_jsx(Error,{children:errors.email&&errors.email.message})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(InputFormWrapper,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{ref:register({required:'required',pattern:{value:/^[A-Z0-9._]{3,15}$/i,message:'invalid password'}}),type:\"password\",name:\"password\",id:\"password\"}),/*#__PURE__*/_jsx(Error,{children:errors.password&&errors.password.message})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Log in\"}),isLoginLoading&&/*#__PURE__*/_jsx(LoadIndicator,{}),/*#__PURE__*/_jsx(NavLinkWrapper,{children:/*#__PURE__*/_jsx(NavLink,{to:\"\".concat(LOGIN,\"?tab=reg\"),children:/*#__PURE__*/_jsx(Transfer,{children:\"Need an account?\"})})}),/*#__PURE__*/_jsx(Snackbar,{anchorOrigin:{vertical:'bottom',horizontal:'center'},open:isSnackbarOpen,autoHideDuration:6000,onClose:handleSnackbarClose,message:snackMessage,action:/*#__PURE__*/_jsx(IconButton,{size:\"small\",\"aria-label\":\"close\",color:\"inherit\",onClick:handleSnackbarClose,children:/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"small\"})})})]});}export default LoginForm;","map":{"version":3,"names":["React","useForm","NavLink","useHistory","Snackbar","IconButton","CloseIcon","useSelector","useActions","HOME","LOGIN","loginUser","LOGIN_FAIL","LOGIN_LOADING","LOGIN_SUCCESS","Button","InputFormWrapper","LoadIndicator","NavLinkWrapper","Error","Transfer","FormWrapper","jsx","_jsx","jsxs","_jsxs","LoginForm","_useForm","handleSubmit","register","errors","_useActions","_useActions2","_slicedToArray","submitAction","history","_React$useState","useState","_React$useState2","isSnackbarOpen","setSnackbarOpen","_React$useState3","_React$useState4","snackMessage","setSnackMessage","isLoginLoading","state","login","type","handleSnackbarClose","event","reason","submit","data","email","password","then","e","message","push","onSubmit","children","htmlFor","ref","required","pattern","value","id","name","to","concat","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","action","size","color","onClick","fontSize"],"sources":["/Users/dmitrydrobysh/Desktop/SyncDir/code-ui/src/pages/login/components/forms/LoginForm.js"],"sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { useSelector } from 'react-redux';\nimport useActions from '../../../../hooks/useAction';\nimport { HOME, LOGIN } from '../../../../constants/routes';\nimport { loginUser, LOGIN_FAIL, LOGIN_LOADING, LOGIN_SUCCESS } from '../../../../actions/loginActions';\nimport { Button, InputFormWrapper, LoadIndicator, NavLinkWrapper, Error, Transfer, FormWrapper } from './FormsStyles';\n\nfunction LoginForm() {\n  const { handleSubmit, register, errors } = useForm();\n  const [submitAction] = useActions([loginUser]);\n  const history = useHistory();\n  const [isSnackbarOpen, setSnackbarOpen] = React.useState(false);\n  const [snackMessage, setSnackMessage] = React.useState('');\n  const isLoginLoading = useSelector((state) => state.login.type) === LOGIN_LOADING;\n\n  const handleSnackbarClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setSnackbarOpen(false);\n  };\n\n  const submit = (data) => {\n    if (data.email !== '' && data.password !== '') {\n      submitAction(data.email, data.password).then((e) => {\n        if (e.type && e.type === LOGIN_FAIL) {\n          setSnackMessage(e.message);\n          setSnackbarOpen(true);\n        } else if (e.type && e.type === LOGIN_SUCCESS) {\n          // TODO: add push to dashboard page\n          history.push(HOME);\n        }\n      });\n    }\n  };\n\n  return (\n    <FormWrapper onSubmit={handleSubmit(submit)}>\n      <InputFormWrapper>\n        <label htmlFor=\"email\">Email</label>\n        <input\n          ref={register({\n            required: 'required',\n            pattern: {\n              value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i,\n              message: 'invalid email address',\n            },\n          })}\n          id=\"email\"\n          name=\"email\"\n        />\n        <Error>{errors.email && errors.email.message}</Error>\n      </InputFormWrapper>\n      <br />\n      <InputFormWrapper>\n        <label htmlFor=\"password\">Password</label>\n        <input\n          ref={register({\n            required: 'required',\n            pattern: {\n              value: /^[A-Z0-9._]{3,15}$/i,\n              message: 'invalid password',\n            },\n          })}\n          type=\"password\"\n          name=\"password\"\n          id=\"password\"\n        />\n        <Error>{errors.password && errors.password.message}</Error>\n      </InputFormWrapper>\n      <br />\n      <Button type=\"submit\">Log in</Button>\n      {isLoginLoading && <LoadIndicator />}\n      <NavLinkWrapper>\n        <NavLink to={`${LOGIN}?tab=reg`}>\n          <Transfer>Need an account?</Transfer>\n        </NavLink>\n      </NavLinkWrapper>\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        open={isSnackbarOpen}\n        autoHideDuration={6000}\n        onClose={handleSnackbarClose}\n        message={snackMessage}\n        action={\n          <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleSnackbarClose}>\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        }\n      />\n    </FormWrapper>\n  );\n}\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}