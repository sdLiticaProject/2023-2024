{"ast":null,"code":"import _slicedToArray from\"/Users/dmitrydrobysh/Desktop/SyncDir/code-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import{NavLink,useHistory}from'react-router-dom';import{useForm}from'react-hook-form';import{useSelector,useDispatch}from'react-redux';import{LOGIN,HOME}from'../../../../constants/routes';import{registerUser,loginUser,REGISTER_SUCCESS,LOGIN_SUCCESS,REGISTER_LOADING}from'../../../../actions/loginActions';import useActions from'../../../../hooks/useAction';import{Button,InputFormWrapper,Error,Transfer,NavLinkWrapper,FormWrapper,LoadIndicator}from'./FormsStyles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RegistrationForm(){var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register,errors=_useForm.errors,getValues=_useForm.getValues;var history=useHistory();var dispatch=useDispatch();// Alternative bindActionCreators\nvar _useActions=useActions([registerUser]),_useActions2=_slicedToArray(_useActions,1),submitAction=_useActions2[0];var isRegisterSuccess=useSelector(function(state){return state.login.type;})===REGISTER_SUCCESS;var isRegisterLoading=useSelector(function(state){return state.login.type;})===REGISTER_LOADING;useEffect(function(){if(isRegisterSuccess){dispatch(loginUser(getValues('login'),getValues('password'))).then(function(e){if(e.type&&e.type===LOGIN_SUCCESS){history.push(HOME);}});}},[isRegisterSuccess]);var submit=function submit(data){if(data.login!==''&&data.password!==''){submitAction(data.login,data.password,data.firstName,data.lastName);}};return/*#__PURE__*/_jsxs(FormWrapper,{onSubmit:handleSubmit(submit),children:[/*#__PURE__*/_jsxs(InputFormWrapper,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",children:\"Enter your first name\"}),/*#__PURE__*/_jsx(\"input\",{ref:register({required:'required'}),id:\"firstName\",name:\"firstame\"}),/*#__PURE__*/_jsx(Error,{children:errors.firstName&&errors.firstName.message})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(InputFormWrapper,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",children:\"Enter your last name\"}),/*#__PURE__*/_jsx(\"input\",{ref:register({required:'required'}),name:\"lastName\"}),/*#__PURE__*/_jsx(Error,{children:errors.lastName&&errors.lastName.message})]}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(InputFormWrapper,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login\",children:\"Enter your email\"}),/*#__PURE__*/_jsx(\"input\",{ref:register({required:'required',pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i,message:'invalid email address'}}),name:\"login\"}),/*#__PURE__*/_jsx(Error,{children:errors.login&&errors.login.message})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(InputFormWrapper,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Create the password(6-15 symbols)\"}),/*#__PURE__*/_jsx(\"input\",{ref:register({required:'required',pattern:{value:/^[A-Z0-9._]{6,15}$/i,message:'invalid password'}}),id:\"password\",type:\"password\",name:\"password\"}),/*#__PURE__*/_jsx(Error,{children:errors.password&&errors.password.message})]}),/*#__PURE__*/_jsx(\"br\",{}),isRegisterLoading&&/*#__PURE__*/_jsx(LoadIndicator,{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Sign up\"}),/*#__PURE__*/_jsx(NavLinkWrapper,{children:/*#__PURE__*/_jsx(NavLink,{to:LOGIN,children:/*#__PURE__*/_jsx(Transfer,{children:\"Have an account?\"})})})]});}export default RegistrationForm;","map":{"version":3,"names":["React","useEffect","NavLink","useHistory","useForm","useSelector","useDispatch","LOGIN","HOME","registerUser","loginUser","REGISTER_SUCCESS","LOGIN_SUCCESS","REGISTER_LOADING","useActions","Button","InputFormWrapper","Error","Transfer","NavLinkWrapper","FormWrapper","LoadIndicator","jsx","_jsx","jsxs","_jsxs","RegistrationForm","_useForm","handleSubmit","register","errors","getValues","history","dispatch","_useActions","_useActions2","_slicedToArray","submitAction","isRegisterSuccess","state","login","type","isRegisterLoading","then","e","push","submit","data","password","firstName","lastName","onSubmit","children","htmlFor","ref","required","id","name","message","pattern","value","to"],"sources":["/Users/dmitrydrobysh/Desktop/SyncDir/code-ui/src/pages/login/components/forms/RegistrationForm.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { LOGIN, HOME } from '../../../../constants/routes';\nimport { registerUser, loginUser, REGISTER_SUCCESS, LOGIN_SUCCESS, REGISTER_LOADING } from '../../../../actions/loginActions';\nimport useActions from '../../../../hooks/useAction';\nimport { Button, InputFormWrapper, Error, Transfer, NavLinkWrapper, FormWrapper, LoadIndicator } from './FormsStyles';\n\nfunction RegistrationForm() {\n  const { handleSubmit, register, errors, getValues } = useForm();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  // Alternative bindActionCreators\n  const [submitAction] = useActions([registerUser]);\n\n  const isRegisterSuccess = useSelector((state) => state.login.type) === REGISTER_SUCCESS;\n  const isRegisterLoading = useSelector((state) => state.login.type) === REGISTER_LOADING;\n\n  useEffect(() => {\n    if (isRegisterSuccess) {\n      dispatch(loginUser(getValues('login'), getValues('password'))).then((e) => {\n        if (e.type && e.type === LOGIN_SUCCESS) {\n          history.push(HOME);\n        }\n      });\n    }\n  }, [isRegisterSuccess]);\n\n  const submit = (data) => {\n    if (data.login !== '' && data.password !== '') {\n      submitAction(data.login, data.password, data.firstName, data.lastName);\n    }\n  };\n\n  return (\n    <FormWrapper onSubmit={handleSubmit(submit)}>\n      <InputFormWrapper>\n        <label htmlFor=\"firstName\">Enter your first name</label>\n        <input\n          ref={register({\n            required: 'required',\n          })}\n          id=\"firstName\"\n          name=\"firstame\"\n        />\n        <Error>{errors.firstName && errors.firstName.message}</Error>\n      </InputFormWrapper>\n      <br />\n      <InputFormWrapper>\n        <label htmlFor=\"lastName\">Enter your last name</label>\n        <input\n          ref={register({\n            required: 'required',\n          })}\n          name=\"lastName\"\n        />\n        <Error>{errors.lastName && errors.lastName.message}</Error>\n      </InputFormWrapper>\n      <br /> <br />\n      <InputFormWrapper>\n        <label htmlFor=\"login\">Enter your email</label>\n        <input\n          ref={register({\n            required: 'required',\n            pattern: {\n              value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i,\n              message: 'invalid email address',\n            },\n          })}\n          name=\"login\"\n        />\n        <Error>{errors.login && errors.login.message}</Error>\n      </InputFormWrapper>\n      <br />\n      <InputFormWrapper>\n        <label htmlFor=\"password\">Create the password(6-15 symbols)</label>\n        <input\n          ref={register({\n            required: 'required',\n            pattern: {\n              value: /^[A-Z0-9._]{6,15}$/i,\n              message: 'invalid password',\n            },\n          })}\n          id=\"password\"\n          type=\"password\"\n          name=\"password\"\n        />\n        <Error>{errors.password && errors.password.message}</Error>\n      </InputFormWrapper>\n      <br />\n      {isRegisterLoading && <LoadIndicator />}\n      <Button type=\"submit\">Sign up</Button>\n      <NavLinkWrapper>\n        <NavLink to={LOGIN}>\n          <Transfer>Have an account?</Transfer>\n        </NavLink>\n      </NavLinkWrapper>\n    </FormWrapper>\n  );\n}\n\nexport default RegistrationForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}