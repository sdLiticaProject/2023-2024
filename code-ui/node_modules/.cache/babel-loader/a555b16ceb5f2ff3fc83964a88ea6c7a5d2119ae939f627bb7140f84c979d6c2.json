{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dmitrydrobysh/Desktop/SyncDir/code-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/dmitrydrobysh/Desktop/SyncDir/code-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import Cookies from'js-cookie';import axios from'axios';import*as api from'../constants/api';export var LOGIN_LOADING='login_loading';export var LOGIN_SUCCESS='login_success';export var LOGIN_FAIL='login_fail';export var LOGOUT_LOADING='LOGOUT_LOADING';export var LOGOUT_SUCCESS='LOGOUT_SUCCESS';export var LOGOUT_FAIL='LOGOUT_FAIL';export var REGISTER_LOADING='REGISTER_LOADING';export var REGISTER_SUCCESS='REGISTER_SUCCESS';export var REGISTER_FAIL='REGISTER_FAIL';export var loginUser=function loginUser(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dispatch({type:LOGIN_LOADING});_context.prev=1;_context.next=4;return axios.post(api.loginUser(),{email:email,password:password});case 4:res=_context.sent;Cookies.set('token',res.data.entity.token,{expires:5});return _context.abrupt(\"return\",dispatch({type:LOGIN_SUCCESS}));case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);return _context.abrupt(\"return\",dispatch({type:LOGIN_FAIL,message:'login failed'}));case 12:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var logoutUser=function logoutUser(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:dispatch({type:LOGOUT_LOADING});_context2.prev=1;_context2.next=4;return axios.post(api.logoutUser(),{},{headers:{Authorization:\"cloudToken \".concat(Cookies.get('token'))}});case 4:res=_context2.sent;if(!(res.status!==204)){_context2.next=7;break;}throw Error(res.data.message);case 7:return _context2.abrupt(\"return\",dispatch({type:LOGOUT_SUCCESS}));case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",dispatch({type:LOGOUT_FAIL,error:_context2.t0}));case 13:case\"end\":return _context2.stop();}},_callee2,null,[[1,10]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var registerUser=function registerUser(email,password,firstName,lastName){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:dispatch({type:REGISTER_LOADING});_context3.prev=1;_context3.next=4;return axios.post(api.registerUser(),{email:email,password:password,firstName:firstName,lastName:lastName});case 4:res=_context3.sent;if(!(res.status!==201)){_context3.next=7;break;}throw Error(res.data.message);case 7:dispatch({type:REGISTER_SUCCESS});_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);dispatch({type:REGISTER_FAIL,error:_context3.t0});case 13:case\"end\":return _context3.stop();}},_callee3,null,[[1,10]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"names":["Cookies","axios","api","LOGIN_LOADING","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_LOADING","LOGOUT_SUCCESS","LOGOUT_FAIL","REGISTER_LOADING","REGISTER_SUCCESS","REGISTER_FAIL","loginUser","email","password","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","res","wrap","_callee$","_context","prev","next","type","post","sent","set","data","entity","token","expires","abrupt","t0","message","stop","_x","apply","arguments","logoutUser","_ref2","_callee2","_callee2$","_context2","headers","Authorization","concat","get","status","Error","error","_x2","registerUser","firstName","lastName","_ref3","_callee3","_callee3$","_context3","_x3"],"sources":["/Users/dmitrydrobysh/Desktop/SyncDir/code-ui/src/actions/loginActions.js"],"sourcesContent":["import Cookies from 'js-cookie';\nimport axios from 'axios';\nimport * as api from '../constants/api';\n\nexport const LOGIN_LOADING = 'login_loading';\nexport const LOGIN_SUCCESS = 'login_success';\nexport const LOGIN_FAIL = 'login_fail';\n\nexport const LOGOUT_LOADING = 'LOGOUT_LOADING';\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nexport const LOGOUT_FAIL = 'LOGOUT_FAIL';\n\nexport const REGISTER_LOADING = 'REGISTER_LOADING';\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_FAIL = 'REGISTER_FAIL';\n\nexport const loginUser = (email, password) => async (dispatch) => {\n  dispatch({\n    type: LOGIN_LOADING,\n  });\n\n  try {\n    const res = await axios.post(api.loginUser(), {\n      email,\n      password,\n    });\n\n    Cookies.set('token', res.data.entity.token, { expires: 5 });\n    return dispatch({\n      type: LOGIN_SUCCESS,\n    });\n  } catch (error) {\n    return dispatch({\n      type: LOGIN_FAIL,\n      message: 'login failed',\n    });\n  }\n};\n\nexport const logoutUser = () => async (dispatch) => {\n  dispatch({\n    type: LOGOUT_LOADING,\n  });\n  try {\n    const res = await axios.post(\n      api.logoutUser(),\n      {},\n      {\n        headers: { Authorization: `cloudToken ${Cookies.get('token')}` },\n      },\n    );\n    if (res.status !== 204) {\n      throw Error(res.data.message);\n    }\n    return dispatch({\n      type: LOGOUT_SUCCESS,\n    });\n  } catch (error) {\n    return dispatch({\n      type: LOGOUT_FAIL,\n      error,\n    });\n  }\n};\n\nexport const registerUser = (email, password, firstName, lastName) => async (dispatch) => {\n  dispatch({\n    type: REGISTER_LOADING,\n  });\n\n  try {\n    const res = await axios.post(api.registerUser(), {\n      email,\n      password,\n      firstName,\n      lastName,\n    });\n    if (res.status !== 201) {\n      throw Error(res.data.message);\n    }\n    dispatch({\n      type: REGISTER_SUCCESS,\n    });\n  } catch (error) {\n    dispatch({\n      type: REGISTER_FAIL,\n      error,\n    });\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}